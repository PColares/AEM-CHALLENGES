{"ast":null,"code":"import e from \"react\";\nexport default function (t, r) {\n  void 0 === t && (t = 6e4), void 0 === r && (r = 1e3);\n\n  var n = e.useState(0),\n      u = n[0],\n      c = n[1],\n      a = e.useRef({}),\n      i = function e(t) {\n    a.current.started || (a.current.started = t, a.current.lastInterval = t);\n    var n = Math.min(r, a.current.timeLeft || Infinity);\n    t - a.current.lastInterval >= n && (a.current.lastInterval += n, c(function (e) {\n      return a.current.timeLeft = e - n, a.current.timeLeft;\n    })), t - a.current.started < a.current.timeToCount ? a.current.requestId = window.requestAnimationFrame(e) : (a.current = {}, c(0));\n  },\n      o = e.useCallback(function (e) {\n    window.cancelAnimationFrame(a.current.requestId);\n    var r = void 0 !== e ? e : t;\n    a.current.started = null, a.current.lastInterval = null, a.current.timeToCount = r, a.current.requestId = window.requestAnimationFrame(i), c(r);\n  }, []),\n      s = e.useCallback(function () {\n    window.cancelAnimationFrame(a.current.requestId), a.current.started = null, a.current.lastInterval = null, a.current.timeToCount = a.current.timeLeft;\n  }, []),\n      l = e.useCallback(function () {\n    !a.current.started && a.current.timeLeft > 0 && (window.cancelAnimationFrame(a.current.requestId), a.current.requestId = window.requestAnimationFrame(i));\n  }, []),\n      m = e.useCallback(function () {\n    a.current.timeLeft && (window.cancelAnimationFrame(a.current.requestId), a.current = {}, c(0));\n  }, []),\n      d = e.useMemo(function () {\n    return {\n      start: o,\n      pause: s,\n      resume: l,\n      reset: m\n    };\n  }, []);\n\n  return e.useEffect(function () {\n    return function () {\n      return window.cancelAnimationFrame(a.current.requestId);\n    };\n  }, []), [u, d];\n}","map":{"version":3,"sources":["../src/index.js"],"names":["timeToCount","interval","timeLeft","setTimeLeft","React","useState","timer","useRef","run","ts","current","started","lastInterval","localInterval","Math","min","Infinity","requestId","window","requestAnimationFrame","start","useCallback","ttc","cancelAnimationFrame","newTimeToCount","undefined","pause","resume","reset","actions","useMemo","useEffect"],"mappings":"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","sourcesContent":["import React from 'react';\n\nconst useCountDown = (timeToCount = 60 * 1000, interval = 1000) => {\n  const [timeLeft, setTimeLeft] = React.useState(0);\n  const timer = React.useRef({});\n\n  const run = (ts) => {\n    if (!timer.current.started) {\n      timer.current.started = ts;\n      timer.current.lastInterval = ts;\n    }\n\n    const localInterval = Math.min(interval, (timer.current.timeLeft || Infinity));\n    if ((ts - timer.current.lastInterval) >= localInterval) {\n      timer.current.lastInterval += localInterval;\n      setTimeLeft((timeLeft) => {\n        timer.current.timeLeft = timeLeft - localInterval;\n        return timer.current.timeLeft;\n      });\n    }\n\n    if (ts - timer.current.started < timer.current.timeToCount) {\n      timer.current.requestId = window.requestAnimationFrame(run);\n    } else {\n      timer.current = {};\n      setTimeLeft(0);\n    }\n  }\n\n  const start = React.useCallback(\n    (ttc) => {\n      window.cancelAnimationFrame(timer.current.requestId);\n\n      const newTimeToCount = ttc !== undefined ? ttc : timeToCount\n      timer.current.started = null;\n      timer.current.lastInterval = null;\n      timer.current.timeToCount = newTimeToCount;\n      timer.current.requestId = window.requestAnimationFrame(run);\n\n      setTimeLeft(newTimeToCount);\n    },\n    [],\n  );\n\n  const pause = React.useCallback(\n    () => {\n      window.cancelAnimationFrame(timer.current.requestId);\n      timer.current.started = null;\n      timer.current.lastInterval = null;\n      timer.current.timeToCount = timer.current.timeLeft;\n    },\n    [],\n  );\n\n  const resume = React.useCallback(\n    () => {\n      if (!timer.current.started && timer.current.timeLeft > 0) {\n        window.cancelAnimationFrame(timer.current.requestId);\n        timer.current.requestId = window.requestAnimationFrame(run);\n      }\n    },\n    [],\n  );\n\n  const reset = React.useCallback(\n    () => {\n      if (timer.current.timeLeft) {\n        window.cancelAnimationFrame(timer.current.requestId);\n        timer.current = {};\n        setTimeLeft(0);\n      }\n    },\n    [],\n  );\n\n  const actions = React.useMemo(\n    () => ({ start, pause, resume, reset }),\n    [],\n  );\n\n  React.useEffect(() => {\n    return () => window.cancelAnimationFrame(timer.current.requestId);\n  }, []);\n\n  return [timeLeft, actions];\n}\n\nexport default useCountDown;\n"]},"metadata":{},"sourceType":"module"}