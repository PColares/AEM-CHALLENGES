{"ast":null,"code":"import _defineProperty from\"C:/Users/Pedro/Documents/AEM/AEM-projects/reactapp/ui.frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Pedro/Documents/AEM/AEM-projects/reactapp/ui.frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Pedro/Documents/AEM/AEM-projects/reactapp/ui.frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{useHistory}from\"react-router-dom\";import{MapTo}from'@adobe/aem-react-editable-components';import StoreContext from'../Store/Context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";require('./index.css');function initialState(){return{user:\"\",password:\"\"};}function login(_ref){var user=_ref.user,password=_ref.password;if(user==='admin'&&password==='admin'){return{token:'1234'};}return{error:'Ops, usuário ou senha inválidos. Tente novamente!'};}export var LoginForm=function LoginForm(_ref2){var title=_ref2.title,buttonName=_ref2.buttonName;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useContext=useContext(StoreContext),setToken=_useContext.setToken;var history=useHistory();function onChange(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));}function onSubmit(event){event.preventDefault();var _login=login(values),token=_login.token,error=_login.error;if(token){setToken(token);return history.push(\"/content/reactapp/us/en/homepage.html\");}setError(error);setValues(initialState);}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{className:error?\"login-error-border\":\"form-input\",id:\"user\",type:\"text\",name:\"user\",placeholder:\"Usu\\xE1rio\",onChange:onChange,value:values.user}),/*#__PURE__*/_jsx(\"input\",{className:error?\"login-error-border\":\"form-input\",id:\"password\",type:\"password\",name:\"password\",placeholder:\"Senha\",onChange:onChange,value:values.password}),error?/*#__PURE__*/_jsx(\"div\",{className:\"login-error\",children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",type:\"submit\",children:buttonName})]});};export default MapTo('reactapp/components/form-section')(LoginForm);","map":{"version":3,"names":["React","useState","useContext","useHistory","MapTo","StoreContext","require","initialState","user","password","login","token","error","LoginForm","title","buttonName","values","setValues","setError","setToken","history","onChange","event","target","value","name","onSubmit","preventDefault","push"],"sources":["C:/Users/Pedro/Documents/AEM/AEM-projects/reactapp/ui.frontend/src/components/FormSection/formSection.js"],"sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MapTo } from '@adobe/aem-react-editable-components';\r\nimport StoreContext from '../Store/Context'\r\nrequire('./index.css')\r\n\r\nfunction initialState() {\r\n    return { user: \"\", password: \"\" };\r\n}\r\n\r\nfunction login({ user, password }) {\r\n    if (user === 'admin' && password === 'admin') {\r\n        return { token: '1234' };\r\n    }\r\n    return { error: 'Ops, usuário ou senha inválidos. Tente novamente!' };\r\n}\r\n\r\nexport const LoginForm = ({ title, buttonName }) => {\r\n    const [values, setValues] = useState(initialState);\r\n    const [error, setError] = useState(null);\r\n    const { setToken } = useContext(StoreContext);\r\n    const history = useHistory();\r\n\r\n    function onChange(event) {\r\n        const { value, name } = event.target;\r\n\r\n        setValues({\r\n            ...values,\r\n            [name]: value,\r\n        });\r\n    }\r\n\r\n    function onSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        const { token, error } = login(values);\r\n\r\n        if (token) {\r\n            setToken(token)\r\n            return history.push(\"/content/reactapp/us/en/homepage.html\");\r\n        }\r\n        setError(error);\r\n        setValues(initialState);\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <h1 className=\"form-title\">{title}</h1>\r\n            <div className=\"input-container\">\r\n                <input\r\n                    className={error ? \"login-error-border\" : \"form-input\"}\r\n                    id=\"user\"\r\n                    type=\"text\"\r\n                    name=\"user\"\r\n                    placeholder=\"Usuário\"\r\n                    onChange={onChange}\r\n                    value={values.user}\r\n                />\r\n                <input\r\n                    className={error ? \"login-error-border\" : \"form-input\"}\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Senha\"\r\n                    onChange={onChange}\r\n                    value={values.password}\r\n                />\r\n                {error ? (\r\n                    <div className=\"login-error\">{error}</div>\r\n                ) : <div><span></span></div>}\r\n            </div>\r\n            <button className=\"form-button\" type=\"submit\" >\r\n                {buttonName}\r\n            </button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default MapTo('reactapp/components/form-section')(LoginForm);\r\n"],"mappings":"6bAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,KAAT,KAAsB,sCAAtB,CACA,MAAOC,aAAP,KAAyB,kBAAzB,C,wFACAC,OAAO,CAAC,aAAD,CAAP,CAEA,QAASC,aAAT,EAAwB,CACpB,MAAO,CAAEC,IAAI,CAAE,EAAR,CAAYC,QAAQ,CAAE,EAAtB,CAAP,CACH,CAED,QAASC,MAAT,MAAmC,IAAlBF,KAAkB,MAAlBA,IAAkB,CAAZC,QAAY,MAAZA,QAAY,CAC/B,GAAID,IAAI,GAAK,OAAT,EAAoBC,QAAQ,GAAK,OAArC,CAA8C,CAC1C,MAAO,CAAEE,KAAK,CAAE,MAAT,CAAP,CACH,CACD,MAAO,CAAEC,KAAK,CAAE,mDAAT,CAAP,CACH,CAED,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAY,OAA2B,IAAxBC,MAAwB,OAAxBA,KAAwB,CAAjBC,UAAiB,OAAjBA,UAAiB,CAChD,cAA4Bd,QAAQ,CAACM,YAAD,CAApC,wCAAOS,MAAP,eAAeC,SAAf,eACA,eAA0BhB,QAAQ,CAAC,IAAD,CAAlC,yCAAOW,KAAP,eAAcM,QAAd,eACA,gBAAqBhB,UAAU,CAACG,YAAD,CAA/B,CAAQc,QAAR,aAAQA,QAAR,CACA,GAAMC,QAAO,CAAGjB,UAAU,EAA1B,CAEA,QAASkB,SAAT,CAAkBC,KAAlB,CAAyB,CACrB,kBAAwBA,KAAK,CAACC,MAA9B,CAAQC,KAAR,eAAQA,KAAR,CAAeC,IAAf,eAAeA,IAAf,CAEAR,SAAS,gCACFD,MADE,wBAEJS,IAFI,CAEGD,KAFH,GAAT,CAIH,CAED,QAASE,SAAT,CAAkBJ,KAAlB,CAAyB,CACrBA,KAAK,CAACK,cAAN,GAEA,WAAyBjB,KAAK,CAACM,MAAD,CAA9B,CAAQL,KAAR,QAAQA,KAAR,CAAeC,KAAf,QAAeA,KAAf,CAEA,GAAID,KAAJ,CAAW,CACPQ,QAAQ,CAACR,KAAD,CAAR,CACA,MAAOS,QAAO,CAACQ,IAAR,CAAa,uCAAb,CAAP,CACH,CACDV,QAAQ,CAACN,KAAD,CAAR,CACAK,SAAS,CAACV,YAAD,CAAT,CACH,CAED,mBACI,cAAM,QAAQ,CAAEmB,QAAhB,wBACI,WAAI,SAAS,CAAC,YAAd,UAA4BZ,KAA5B,EADJ,cAEI,aAAK,SAAS,CAAC,iBAAf,wBACI,cACI,SAAS,CAAEF,KAAK,CAAG,oBAAH,CAA0B,YAD9C,CAEI,EAAE,CAAC,MAFP,CAGI,IAAI,CAAC,MAHT,CAII,IAAI,CAAC,MAJT,CAKI,WAAW,CAAC,YALhB,CAMI,QAAQ,CAAES,QANd,CAOI,KAAK,CAAEL,MAAM,CAACR,IAPlB,EADJ,cAUI,cACI,SAAS,CAAEI,KAAK,CAAG,oBAAH,CAA0B,YAD9C,CAEI,EAAE,CAAC,UAFP,CAGI,IAAI,CAAC,UAHT,CAII,IAAI,CAAC,UAJT,CAKI,WAAW,CAAC,OALhB,CAMI,QAAQ,CAAES,QANd,CAOI,KAAK,CAAEL,MAAM,CAACP,QAPlB,EAVJ,CAmBKG,KAAK,cACF,YAAK,SAAS,CAAC,aAAf,UAA8BA,KAA9B,EADE,cAEF,kCAAK,eAAL,EArBR,GAFJ,cAyBI,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UACKG,UADL,EAzBJ,GADJ,CA+BH,CA3DM,CA6DP,cAAeX,MAAK,CAAC,kCAAD,CAAL,CAA0CS,SAA1C,CAAf"},"metadata":{},"sourceType":"module"}